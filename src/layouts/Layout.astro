---
import '../styles/global.css';
import Comments from '../components/Comments.astro';
const { frontmatter } = Astro.props;
const title = frontmatter?.title || Astro.props.title || "Jeffrey Patton | Cloud Architect";
const isBlogPost = Astro.url.pathname.startsWith('/blog');
const date = frontmatter?.date || "Feb 26, 2026";
---
<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<title>{title}</title>
		
		<script is:inline>
			const theme = (() => {
				if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
					return localStorage.getItem('theme');
				}
				return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
			})();
			document.documentElement.classList.toggle('dark', theme === 'dark');
		</script>

		<script is:inline>
			(function(n,i,v,r,s,c,x,z){x=window.AwsRumClient={q:[],n:n,i:i,v:v,r:r,c:c};window[n]=function(c,p){x.q.push({c:c,p:p});};z=document.createElement('script');z.async=true;z.src=s;document.head.insertBefore(z,document.head.getElementsByTagName('script')[0]);})(
				'cwr',
				'ceedfa36-a442-4a90-af3f-5038bc82c84e',
				'1.0.0',
				'us-east-1',
				'https://client.rum.us-east-1.amazonaws.com/1.19.0/cwr.js',
				{
					sessionSampleRate: 1,
					identityPoolId: "us-east-1:5158c3c8-d592-4bc0-810b-7f15eb0376a8",
					endpoint: "https://dataplane.rum.us-east-1.amazonaws.com",
					telemetries: ["performance","errors","http"],
					allowCookies: true,
					enableXRay: false,
					signing: true
				}
			);
		</script>
	</head>
	<body class="bg-white text-slate-900 dark:bg-black dark:text-slate-100 transition-colors duration-300 antialiased font-sans">
		<main class="max-w-4xl mx-auto px-6 py-12">
			<nav class="flex justify-between items-start mb-16 border-b border-slate-200 dark:border-slate-800 pb-8">
				<div>
					<a href="/" class="group">
						<h1 class="text-5xl md:text-6xl font-black tracking-tighter text-slate-900 dark:text-white leading-none">
							Patton <span class="text-blue-600 dark:text-blue-500">Tech</span> Blog
						</h1>
					</a>
					<p class="mt-4 text-sm font-bold tracking-widest uppercase text-slate-500 dark:text-slate-400">
						Cybersecurity ‚Ä¢ Cloud Infrastructure ‚Ä¢ IT Strategy
					</p>
				</div>
				<button id="themeToggle" class="p-3 rounded-xl border border-slate-200 dark:border-slate-800 bg-slate-50 dark:bg-slate-900 hover:scale-105 transition-all shadow-sm">
					<span class="dark:hidden text-xl">üåô</span><span class="hidden dark:inline text-xl">‚òÄÔ∏è</span>
				</button>
			</nav>

			{isBlogPost && (
				<div class="flex items-center gap-4 mb-10 text-sm font-semibold text-slate-500">
					<span class="flex items-center gap-2">
						<div class="w-7 h-7 rounded-full bg-blue-600 flex items-center justify-center text-xs text-white">JP</div>
						Jeffrey Patton
					</span>
					<span class="text-slate-300 dark:text-slate-800">|</span>
					<span>{date}</span>
					<span class="text-slate-300 dark:text-slate-800">|</span>
					<span class="flex items-center gap-1">
						<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
						5 min read
					</span>
				</div>
			)}
			
			<article class="prose prose-slate prose-lg dark:prose-invert max-w-none 
				prose-headings:font-extrabold prose-headings:tracking-tight 
				prose-a:text-blue-600 dark:prose-a:text-blue-400 prose-a:font-semibold
				prose-pre:border prose-pre:border-slate-800
				prose-code:text-blue-600 dark:prose-code:text-blue-300">
				<slot />
			</article>

			{isBlogPost && (
				<div class="mt-24 pt-12 border-t border-slate-200 dark:border-slate-800">
					<Comments />
				</div>
			)}
		</main>

		<script>
			document.getElementById('themeToggle').addEventListener('click', () => {
				const isDark = document.documentElement.classList.toggle('dark');
				localStorage.setItem('theme', isDark ? 'dark' : 'light');
			});
		</script>
	</body>
</html>
